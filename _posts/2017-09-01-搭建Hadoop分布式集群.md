---
layout: post
title:  "搭建Hadoop分布式集群"
date:   2017-09-01 21:15:20 +0800
categories: Hadoop
tags: 分布式集群
author: Jeff
mathjax: true
---

* content
{:toc}


# 环境介绍
* 1 系统及使用软件    
    Centos6.8 64位系统    
    hadoop-2.6.0    
    Java-1.7.80    
    zookeeper-3.4.9

* 2 实验拓扑及实验注意事项<br>
    z1,z2: namenode,resourcemanager,journalnode,zookeeper    
    z3,z4,z5: datanode,journalnode,zookeeper    
    PS: Journalnode和ZooKeeper保持奇数个，最少不少于3个节点。实验中使用的安装包，如未给出下载地址，请自行去官网下载。以下操作如未说明，则需要在5台机器上分别操作，截图则一般以h1为主。当创建好hadoop用户后，如未说明则操作一律使用hadoop用户进行。 
    ![](http://ov7z79pcc.bkt.clouddn.com/15043115750991.jpg)

# 基础配置
* 1 关闭防火墙和selinux    
    chkconfig iptables off    
    vim /etc/selinux/config    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037291026190.jpg)
    
* 2 修改hostname，并将域名和ip的映射关系写入hosts文件    
    vim /etc/sysconfig/network（其他4台改为自己的主机名）    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037291270890.jpg)<br>
    vim /etc/hosts 
    ![](http://ov7z79pcc.bkt.clouddn.com/15043120325447.jpg)

* 3 同步系统时间    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037291814068.jpg)
    
* 4 创建hadoop用户，并修改其登录密码    
    useradd -m hadoop<br>
    passwd hadoop<br>
    ![](http://ov7z79pcc.bkt.clouddn.com/15037292020082.jpg)
    
* 5 配置免密码登录，su到hadoop用户<br>
    ![](http://ov7z79pcc.bkt.clouddn.com/15037292207645.jpg)

* 6 生成密钥文件，一路回车即可    
    ssh-keygen –t rsa    
    
* 7 为.ssh目录授权    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037292610825.jpg)
    
* 8 将公钥分别传到5台机器中，分别检查5台机器上是否存有5个公钥<br>
    ssh-copy-id hadoop@h1    
    ssh-copy-id hadoop@h2    
    ssh-copy-id hadoop@h3    
    ssh-copy-id hadoop@h4    
    ssh-copy-id hadoop@h5    
    ![](http://ov7z79pcc.bkt.clouddn.com/15043124613928.jpg)

# 安装JDK
* 1 创建放置软件的目录，并将软件上传    
    mkdir /home/hadoop/app

* 2 解压软件包，并创建软连接    
    tar zxvf java.tar.gz 
    ln -s jdk1.7.0_80 jdk
    
* 3 在用户的配置文件中,配置jdk环境变量    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037293678779.jpg)<br>
    重新读取配置文件使其生效 
    . ~/.bashrc
    
* 4 查看是否安装成功    
    ![](http://ov7z79pcc.bkt.clouddn.com/15037294033187.jpg)

# 安装Zookeeper

